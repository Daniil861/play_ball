(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)})),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible"));const t=document.querySelector(".preloader__dots"),s=document.querySelector(".preloader"),o=document.querySelectorAll(".acces-preloader__text-hide"),n=document.querySelector(".acces-preloader__button"),i=document.querySelector(".acces-preloader__button_back"),l=document.querySelector(".wrapper"),a=document.querySelector(".header-wrapper__pause"),c=document.querySelector(".game"),r=document.querySelector(".pause");let m=document.querySelector(".header-wrapper__count_points"),d=document.querySelector(".header-wrapper__count_time");sessionStorage.getItem("monets")&&(m.textContent=sessionStorage.getItem("monets")),sessionStorage.getItem("coins")&&(d.textContent=sessionStorage.getItem("coins")),sessionStorage.getItem("rocket")>0&&document.querySelector(".weapons__rocket")&&document.querySelector(".weapons__rocket").classList.remove("_no-active"),sessionStorage.getItem("bomb")>0&&document.querySelector(".weapons__bomb")&&document.querySelector(".weapons__bomb").classList.remove("_no-active"),document.addEventListener("click",(e=>{let u=e.target;if(u.closest(".acces-preloader__button")&&(s.classList.add("_hide"),sessionStorage.setItem("preloader",!0),l.classList.add("_visible")),u.closest(".preloader__dots-target")&&(t.classList.add("_hide"),o.forEach((e=>{e.classList.add("_visible")})),n.classList.add("_hide"),i.classList.add("_visible")),u.closest(".acces-preloader__button_back")&&(t.classList.remove("_hide"),o.forEach((e=>{e.classList.remove("_visible")})),n.classList.remove("_hide"),i.classList.remove("_visible")),u.closest(".bonus__button")&&(document.querySelector(".bonus__image").classList.add("_anim"),document.querySelector(".bonus__button").classList.add("_hide"),setTimeout((()=>{!function(){let e=E(),t=document.createElement("div");t.classList.add("bonus__item");let s=document.createElement("div");s.classList.add("bonus__item"),s.classList.add("bonus__item_two");let o=document.createElement("div");o.classList.add("bonus__item"),o.classList.add("bonus__item_three");let n=document.createElement("img"),i=document.createElement("img"),l=document.createElement("img"),a=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div");if(0==e[0])if(n.setAttribute("src","img/icons/ball-2.svg"),n.setAttribute("alt","Image"),t.append(n),document.querySelector(".bonus__prize_one").append(t),sessionStorage.getItem("ball")){let e=+sessionStorage.getItem("ball");sessionStorage.setItem("ball",e+1)}else sessionStorage.setItem("ball",1);else if(1==e[0])if(n.setAttribute("src","img/icons/bomb.svg"),n.setAttribute("alt","Image"),t.append(n),document.querySelector(".bonus__prize_one").append(t),sessionStorage.getItem("bomb")){let e=+sessionStorage.getItem("bomb");sessionStorage.setItem("bomb",e+1)}else sessionStorage.setItem("bomb",1);else if(2==e[0]){a.classList.add("bonus__text");let e=H();a.textContent=`+${e}`,setTimeout((()=>{m.textContent=+m.innerHTML+e,sessionStorage.setItem("monets",m.innerHTML),m.classList.add("_anim"),setTimeout((()=>{m.classList.remove("_anim")}),1e3)}),500),n.setAttribute("src","img/icons/dot.svg"),n.setAttribute("alt","Image"),t.append(n,a),document.querySelector(".bonus__prize_one").append(t)}else if(3==e[0])if(n.setAttribute("src","img/icons/rocket.svg"),n.setAttribute("alt","Image"),t.append(n),document.querySelector(".bonus__prize_one").append(t),sessionStorage.getItem("rocket")){let e=+sessionStorage.getItem("rocket");sessionStorage.setItem("rocket",e+1)}else sessionStorage.setItem("rocket",1);else if(4==e[0]){a.classList.add("bonus__text");let e=z();a.textContent=`+${e}`,setTimeout((()=>{d.textContent=+d.innerHTML+e,sessionStorage.setItem("coins",d.innerHTML),d.classList.add("_anim"),setTimeout((()=>{d.classList.remove("_anim")}),1e3)}),500),n.setAttribute("src","img/icons/romb.svg"),n.setAttribute("alt","Image"),t.append(n,a),document.querySelector(".bonus__prize_one").append(t)}if(0==e[1])if(i.setAttribute("src","img/icons/ball-2.svg"),i.setAttribute("alt","Image"),s.append(i),document.querySelector(".bonus__prize_two").append(s),sessionStorage.getItem("ball")){let e=+sessionStorage.getItem("ball");sessionStorage.setItem("ball",e+1)}else sessionStorage.setItem("ball",1);else if(1==e[1])if(i.setAttribute("src","img/icons/bomb.svg"),i.setAttribute("alt","Image"),s.append(i),document.querySelector(".bonus__prize_two").append(s),sessionStorage.getItem("bomb")){let e=+sessionStorage.getItem("bomb");sessionStorage.setItem("bomb",e+1)}else sessionStorage.setItem("bomb",1);else if(2==e[1]){c.classList.add("bonus__text"),c.classList.add("bonus__text_small");let e=H();c.textContent=`+${e}`,setTimeout((()=>{m.textContent=+m.innerHTML+e,sessionStorage.setItem("monets",m.innerHTML),m.classList.add("_anim"),setTimeout((()=>{m.classList.remove("_anim")}),1e3)}),500),i.setAttribute("src","img/icons/dot.svg"),i.setAttribute("alt","Image"),s.append(i,c),document.querySelector(".bonus__prize_two").append(s)}else if(3==e[1])if(i.setAttribute("src","img/icons/rocket.svg"),i.setAttribute("alt","Image"),s.append(i),document.querySelector(".bonus__prize_two").append(s),sessionStorage.getItem("rocket")){let e=+sessionStorage.getItem("rocket");sessionStorage.setItem("rocket",e+1)}else sessionStorage.setItem("rocket",1);else if(4==e[1]){c.classList.add("bonus__text"),c.classList.add("bonus__text_small");let e=z();c.textContent=`+${e}`,setTimeout((()=>{d.textContent=+d.innerHTML+e,sessionStorage.setItem("coins",d.innerHTML),d.classList.add("_anim"),setTimeout((()=>{d.classList.remove("_anim")}),1e3)}),500),i.setAttribute("src","img/icons/romb.svg"),i.setAttribute("alt","Image"),s.append(i,c),document.querySelector(".bonus__prize_two").append(s)}if(0==e[2])if(l.setAttribute("src","img/icons/ball-2.svg"),l.setAttribute("alt","Image"),o.append(l),document.querySelector(".bonus__prize_three").append(o),sessionStorage.getItem("ball")){let e=+sessionStorage.getItem("ball");sessionStorage.setItem("ball",e+1)}else sessionStorage.setItem("ball",1);else if(1==e[2])if(l.setAttribute("src","img/icons/bomb.svg"),l.setAttribute("alt","Image"),o.append(l),document.querySelector(".bonus__prize_three").append(o),sessionStorage.getItem("bomb")){let e=+sessionStorage.getItem("bomb");sessionStorage.setItem("bomb",e+1)}else sessionStorage.setItem("bomb",1);else if(2==e[2]){r.classList.add("bonus__text"),r.classList.add("bonus__text_small");let e=H();r.textContent=`+${e}`,setTimeout((()=>{m.textContent=+m.innerHTML+e,sessionStorage.setItem("monets",m.innerHTML),m.classList.add("_anim"),setTimeout((()=>{m.classList.remove("_anim")}),1e3)}),500),l.setAttribute("src","img/icons/dot.svg"),l.setAttribute("alt","Image"),o.append(l,r),document.querySelector(".bonus__prize_three").append(o)}else if(3==e[2])if(l.setAttribute("src","img/icons/rocket.svg"),l.setAttribute("alt","Image"),o.append(l),document.querySelector(".bonus__prize_three").append(o),sessionStorage.getItem("rocket")){let e=+sessionStorage.getItem("rocket");sessionStorage.setItem("rocket",e+1)}else sessionStorage.setItem("rocket",1);else if(4==e[2]){r.classList.add("bonus__text"),r.classList.add("bonus__text_small");let e=z();r.textContent=`+${e}`,setTimeout((()=>{d.textContent=+d.innerHTML+e,sessionStorage.setItem("coins",d.innerHTML),d.classList.add("_anim"),setTimeout((()=>{d.classList.remove("_anim")}),1e3)}),500),l.setAttribute("src","img/icons/romb.svg"),l.setAttribute("alt","Image"),o.append(l,r),document.querySelector(".bonus__prize_three").append(o)}}()}),1e3)),u.closest(".shop__item_ball"))if(+m.innerHTML>=9e4)if(setTimeout((()=>{m.innerHTML=+m.innerHTML-9e4,sessionStorage.setItem("monets",m.innerHTML),m.classList.add("_buy"),setTimeout((()=>{m.classList.remove("_buy")}),500)}),200),sessionStorage.getItem("ball")){let e=+sessionStorage.getItem("ball");sessionStorage.setItem("ball",e+1)}else sessionStorage.setItem("ball",1);else m.classList.add("_no-money"),setTimeout((()=>{m.classList.remove("_no-money")}),1e3);if(u.closest(".shop__item_bomb"))if(+d.innerHTML>=50)if(setTimeout((()=>{d.innerHTML=+d.innerHTML-50,sessionStorage.setItem("coins",d.innerHTML),d.classList.add("_buy"),setTimeout((()=>{d.classList.remove("_buy")}),500)}),200),sessionStorage.getItem("bomb")){let e=+sessionStorage.getItem("bomb");sessionStorage.setItem("bomb",e+1)}else sessionStorage.setItem("bomb",1);else d.classList.add("_no-money"),setTimeout((()=>{d.classList.remove("_no-money")}),1e3);if(u.closest(".shop__item_rocket"))if(+m.innerHTML>=200)if(setTimeout((()=>{m.innerHTML=+m.innerHTML-200,sessionStorage.setItem("monets",m.innerHTML),m.classList.add("_buy"),setTimeout((()=>{m.classList.remove("_buy")}),500)}),200),sessionStorage.getItem("rocket")){let e=+sessionStorage.getItem("rocket");sessionStorage.setItem("rocket",e+1)}else sessionStorage.setItem("rocket",1);else m.classList.add("_no-money"),setTimeout((()=>{m.classList.remove("_no-money")}),1e3);u.closest(".header-wrapper__pause")&&(a.classList.contains("_active")?(a.classList.remove("_active"),c.classList.remove("_hide"),r.classList.remove("_active"),v=setInterval((()=>{M()}),30)):(a.classList.add("_active"),c.classList.add("_hide"),r.classList.add("_active"),clearInterval(v))),u.closest(".pause__item_continue")&&(a.classList.remove("_active"),c.classList.remove("_hide"),r.classList.remove("_active"),v=setInterval((()=>{M()}),30)),u.closest(".button_start")&&(sessionStorage.getItem("game-one")||sessionStorage.getItem("game-two")||sessionStorage.getItem("game-three")?location.href="levels.html":location.href="game.html"),u.closest(".game__ball")&&!sessionStorage.getItem("play-ball")&&(v=setInterval((()=>{M()}),30),document.querySelector(".game__ball").classList.add("_anim")),u.closest(".weapons__rocket")&&sessionStorage.getItem("rocket")>0&&(document.querySelector(".weapons__rocket").classList.add("_no-active"),function(){let e=document.querySelectorAll(".game__element"),t=document.createElement("div");t.classList.add("game__rocket"),t.classList.add("_active");let s=document.createElement("img");s.setAttribute("src","img/icons/rocket.svg"),s.setAttribute("alt","Image"),t.append(s),f.append(t);let o=setInterval((()=>{A+=-10,t.style.top=`${A}px`,A<-1200&&(clearInterval(o),t.style.top="0%",A=0,t.remove());for(let s=0;s<e.length;s++){let o=t.getBoundingClientRect().left,n=t.getBoundingClientRect().left+10,i=t.getBoundingClientRect().top,l=t.getBoundingClientRect().top+10,a=e[s].getBoundingClientRect().left,c=e[s].getBoundingClientRect().left+b,r=e[s].getBoundingClientRect().top,m=e[s].getBoundingClientRect().top+p;n>a&&i<m&&o<c&&l>r&&(e[s].classList.add("_hide"),e[s].dataset.destroy=1)}}),10),n=+sessionStorage.getItem("rocket");n--,sessionStorage.setItem("rocket",n),setTimeout((()=>{sessionStorage.getItem("rocket")>0&&document.querySelector(".weapons__rocket").classList.remove("_no-active")}),1e3)}(),setTimeout((()=>{w()}),1500)),u.closest(".weapons__bomb")&&(document.querySelector(".weapons__bomb").classList.add("_no-active"),function(){let e=document.querySelectorAll(".game__element"),t=document.createElement("div");t.classList.add("game__bomb"),t.classList.add("_active");let s=document.createElement("img");s.setAttribute("src","img/icons/bomb.svg"),s.setAttribute("alt","Image"),t.append(s);let o=T(5,80),n=T(5,50);t.style.left=`${o}%`,t.style.top=`${n}%`,S.append(t);for(let s=0;s<e.length;s++){let o=t.getBoundingClientRect().left,n=t.getBoundingClientRect().left+50,i=t.getBoundingClientRect().top,l=t.getBoundingClientRect().top+70,a=e[s].getBoundingClientRect().left,c=e[s].getBoundingClientRect().left+b,r=e[s].getBoundingClientRect().top,m=e[s].getBoundingClientRect().top+p;n>a&&i<m&&o<c&&l>r&&(e[s].classList.add("_hide"),e[s].dataset.destroy=1)}let i=+sessionStorage.getItem("bomb");i--,sessionStorage.setItem("bomb",i),setTimeout((()=>{sessionStorage.getItem("bomb")>0&&document.querySelector(".weapons__bomb").classList.remove("_no-active"),t.remove()}),1e3)}(),setTimeout((()=>{w()}),1500)),u.closest(".weapons__ball")&&(document.querySelector(".weapons__ball").classList.add("_no-active"),function(){let e=document.querySelectorAll(".game__element"),t=document.createElement("div");t.classList.add("game__ball-two"),t.classList.add("_active");let s=document.createElement("img");s.setAttribute("src","img/icons/ball-2.svg"),s.setAttribute("alt","Image"),t.append(s);let o=T(5,50);t.style.top=`${o}%`,S.append(t);let n=setInterval((()=>{B+=10,t.style.right=`${B}px`,B>500&&(clearInterval(n),t.style.right="0%",B=0,t.remove());for(let s=0;s<e.length;s++){let o=t.getBoundingClientRect().left,n=t.getBoundingClientRect().left+10,i=t.getBoundingClientRect().top,l=t.getBoundingClientRect().top+10,a=e[s].getBoundingClientRect().left,c=e[s].getBoundingClientRect().left+b,r=e[s].getBoundingClientRect().top,m=e[s].getBoundingClientRect().top+p;n>a&&i<m&&o<c&&l>r&&(e[s].classList.add("_hide"),e[s].dataset.destroy=1)}}),10),i=+sessionStorage.getItem("ball");i--,sessionStorage.setItem("ball",i),setTimeout((()=>{sessionStorage.getItem("ball")>0&&document.querySelector(".weapons__ball").classList.remove("_no-active")}),1e3)}(),setTimeout((()=>{w()}),1500))})),document.addEventListener("touchstart",(function(e){if(e.target.closest(".game__platform")){let t=e.touches[0];g=t.clientX,_=t.clientY,console.log(`Start coord: ${g} `)}}),!1),document.addEventListener("touchmove",(function(e){if(!g||!_)return!1;let t=e.touches[0].clientX-g;const s=document.querySelector(".game__platform"),o=window.getComputedStyle(s);let n=parseInt(o.left,10);console.log(n),t>0?I[0]<u-270&&(I[0]+=40,R()):n>0&&(I[0]-=40,R())}),!1);const u=document.documentElement.clientWidth;document.documentElement.clientHeight;let g=null,_=null;const b=47,p=52,S=(document.querySelector(".game__field"),document.querySelector(".game__body")),L=document.querySelector(".game__ball"),f=document.querySelector(".game__platform");let I=[16,5];let y=[49,13];let v,h=1,q=1;function C(){return 7e3/u}let A=0;function T(e,t){return Math.floor(Math.random()*(t-e)+e)}let B=0;function R(){document.querySelector(".game__platform").style.left=`${I[0]}px`}function w(){let e=document.querySelectorAll(".game__element"),t=0;e.forEach((e=>{0==e.dataset.destroy&&t++})),console.log(t),t<=0&&(clearInterval(v),document.querySelector(".play").classList.add("_active"),document.querySelector(".game_one")?sessionStorage.setItem("game-one",!0):document.querySelector(".game_two")?sessionStorage.setItem("game-two",!0):document.querySelector(".game_three")&&sessionStorage.setItem("game-three",!0))}function k(){let e=document.querySelector(".game__ball"),t=e.getBoundingClientRect().left,s=e.getBoundingClientRect().top,o=document.querySelector(".game__platform").getBoundingClientRect().left,n=document.querySelectorAll(".game__element_fruit"),i=document.querySelectorAll(".game__element_flower"),l=document.querySelectorAll(".game__element_lemon"),a=document.querySelectorAll(".game__element_orange"),c=document.querySelectorAll(".game__element_bag");if(w(),n)for(let e=0;e<n.length;e++){let o=n[e].getBoundingClientRect().left,i=n[e].getBoundingClientRect().left+b,l=n[e].getBoundingClientRect().top,a=n[e].getBoundingClientRect().top+p;t+b>o&&s<a&&t<i&&s+p>l&&(n[e].classList.add("_hide"),n[e].dataset.destroy=1,s<=a&&1===q&&n[e].classList.contains("_hide")?q=-1:1===h&&1===q&&n[e].classList.contains("_hide")?h=-1:-1===h&&1===q&&n[e].classList.contains("_hide")?h=1:-1===q&&1===h&&n[e].classList.contains("_hide"))}if(i)for(let e=0;e<i.length;e++){let o=i[e].getBoundingClientRect().left,n=i[e].getBoundingClientRect().left+b,l=i[e].getBoundingClientRect().top,a=i[e].getBoundingClientRect().top+p;t+b>o&&s<a&&t<n&&s+p>l&&(i[e].classList.add("_hide"),i[e].dataset.destroy=1,s<=a&&1===q&&i[e].classList.contains("_hide")?q=-1:1===h&&1===q&&i[e].classList.contains("_hide")?h=-1:-1===h&&1===q&&i[e].classList.contains("_hide")?h=1:-1===q&&1===h&&i[e].classList.contains("_hide"))}if(l)for(let e=0;e<l.length;e++){let o=l[e].getBoundingClientRect().left,n=l[e].getBoundingClientRect().left+b,i=l[e].getBoundingClientRect().top,a=l[e].getBoundingClientRect().top+p;t+b>o&&s<a&&t<n&&s+p>i&&(l[e].style.opacity="0",l[e].dataset.destroy=1,l[e].classList.add("_hide"),s<=a&&1===q&&l[e].classList.contains("_hide")?q=-1:1===h&&1===q&&l[e].classList.contains("_hide")?h=-1:t<=n&&-1===h&&1===q&&l[e].classList.contains("_hide")?h=1:-1===q&&1===h&&l[e].classList.contains("_hide"))}if(a)for(let e=0;e<a.length;e++){let o=a[e].getBoundingClientRect().left,n=a[e].getBoundingClientRect().left+b,i=a[e].getBoundingClientRect().top,l=a[e].getBoundingClientRect().top+p;t+b>o&&s<l&&t<n&&s+p>i&&(a[e].style.opacity="0",a[e].dataset.destroy=1,a[e].classList.add("_hide"),s<=l&&1===q&&a[e].classList.contains("_hide")?q=-1:1===h&&1===q&&a[e].classList.contains("_hide")?h=-1:t<=n&&-1===h&&1===q&&a[e].classList.contains("_hide")?h=1:-1===q&&1===h&&a[e].classList.contains("_hide"))}if(c)for(let e=0;e<c.length;e++){let o=c[e].getBoundingClientRect().left,n=c[e].getBoundingClientRect().left+b,i=c[e].getBoundingClientRect().top,l=c[e].getBoundingClientRect().top+p;t+b>o&&s<l&&t<n&&s+p>i&&(c[e].style.opacity="0",c[e].dataset.destroy=1,c[e].classList.add("_hide"),s<=l&&1===q&&c[e].classList.contains("_hide")?q=-1:1===h&&1===q&&c[e].classList.contains("_hide")?h=-1:t<=n&&-1===h&&1===q&&c[e].classList.contains("_hide")?h=1:-1===q&&1===h&&c[e].classList.contains("_hide"))}if((y[0]>=100-C()||y[1]>=100-C()||y[0]<=0||y[1]<=0)&&function(){let e=document.querySelector(".game__ball"),t=e.getBoundingClientRect().left,s=e.getBoundingClientRect().top;t+70>=u?h=-1:t<=0?h=1:s<=70&&(q=-1)}(),y[1]<=0){clearInterval(v),L.classList.add("_hide");let e=+document.querySelector(".header-wrapper_lifes").innerHTML;e<=0&&document.querySelector(".loose").classList.add("_active"),e--,setTimeout((()=>{document.querySelector(".header-wrapper_lifes").textContent=e,L.style.left="42%",L.style.bottom="13%",y=[42,13],setTimeout((()=>{L.classList.remove("_hide")}),500),setTimeout((()=>{v=setInterval((()=>{M()}),30)}),1e3)}),500)}t+70>=o+50&&t+70<=o+270&&y[1]<=6&&(q=1)}function M(){y[0]+=h,y[1]+=q,L.style.left=y[0]+"%",L.style.bottom=y[1]+"%",k()}sessionStorage.getItem("game-two")&&document.querySelectorAll(".levels__button").forEach((e=>{e.classList.contains("_hide")&&e.classList.remove("_hide")}));let x=[];function E(){let e=Math.floor(5*Math.random()+0);return x.push(e),x.length<3?E():x}function H(){return[10,50,30,10,200,100][Math.floor(6*Math.random()+0)]}function z(){return[1,1,2,6,5,3][Math.floor(6*Math.random()+0)]}window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();